---
interface Heading { depth: number; slug: string; text: string }
const { headings = [] } = Astro.props as { headings: Heading[] };
const items = headings.filter((h) => h.depth === 2 || h.depth === 3);
const indentClass = (d: number) => (d >= 3 ? 'ml-4' : 'ml-0');
---
{items.length > 0 && (
  <aside class="text-sm bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded p-4">
    <div class="font-semibold mb-2">目录</div>
    <ul class="space-y-1">
      {items.map((h) => (
        <li class={indentClass(h.depth)}>
          <a href={`#${h.slug}`} class="hover:underline">{h.text}</a>
        </li>
      ))}
    </ul>
  </aside>
)}
